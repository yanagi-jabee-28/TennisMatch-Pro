# 硬式テニス 試合管理アプリ

このアプリは、硬式テニスのチーム戦における試合スケジュール管理・結果記録を行うWebアプリです。

## 🚀 ライブデモ

**[👉 アプリを試す](https://yanagi-jabee-28.github.io/TennisMatch-Pro-2/)**

> 📝 注意: 初回アクセス時は設定を行い、ローカルストレージにデータが保存されます。

## 主な機能
- **対戦管理**: チームごとの対戦スケジュール表示と結果記録
- **チーム管理**: チームメンバーの表示・編集・動的な組み合わせ
- **スコア記録**: 直感的なクリック操作による試合スコア入力
- **順位表**: 勝率・得失点差による自動順位計算と表示
- **詳細分析エクスポート**: 8セクション構成の包括的CSVレポート（Excel対応）
- **デバッグ機能**: ランダムスコア生成と一括データクリア
- **レスポンシブデザイン**: PC・タブレット・スマホ完全対応
- **データ永続化**: ローカルストレージによる自動保存
- **🔥 スマホ最適化**: タッチ操作・スワイプ・振動フィードバック・PWA対応

## 使い方

### 基本操作
1. **初期設定**: `config.json` でチーム構成とメンバーを編集
2. **サーバー起動**: ローカルサーバーを起動して `index.html` をブラウザで開く
3. **マッチポイント設定**: 画面上部の設定パネルでマッチポイント（通常7点）を設定
4. **試合記録**: 対戦表のマスをクリックして各試合のスコアを入力
5. **順位確認**: 試合結果から自動計算される順位表を確認

### 高度な機能
- **チーム編集**: チーム名横の編集ボタンでメンバー構成を変更可能
- **詳細分析エクスポート**: 「📊 試合分析データをダウンロード」ボタンで包括的な分析レポートをCSV出力
  - 8セクション構成の詳細レポート
  - Excel対応の読み取りやすい形式
  - 統計サマリーと進行状況分析
- **デバッグ機能**: 
  - 🎲 ランダムスコア生成（テスト用の自動データ生成）
  - 🗑️ 全試合結果クリア（データの一括削除）
- **📱 スマホ専用機能**:
  - **タッチ最適化**: 44px以上のタッチターゲット、タップフィードバック
  - **スワイプ操作**: 横スクロール、モーダル閉じる操作
  - **振動フィードバック**: タップ・成功・エラー時の触覚フィードバック
  - **画面回転対応**: 縦横画面の自動調整
  - **キーボード対応**: バーチャルキーボード表示時の画面調整
  - **長押し操作**: セルの長押しでコンテキストメニュー表示
  - **PWA機能**: ホーム画面に追加、オフライン対応
  - **省電力モード**: バッテリー残量に応じた動作最適化

### エクスポートデータ内容
CSVファイルには以下の情報が詳細かつ読み取りやすい形式で含まれます：

#### 📊 **詳細分析レポート構成**
1. **チーム構成メンバー一覧**: 各チームの構成メンバー
2. **全試合結果一覧**: 対戦ID、スコア詳細、試合結果（勝利/引き分け）、試合状況（完了/未実施）
3. **最終順位表（順位順）**: 勝率・得失点差による正式順位とパーセンテージ表示
4. **チーム別統計（チームID順）**: 各チームの詳細な成績データと最終順位
5. **試合別詳細スコア一覧**: 対戦カード、スコア差、具体的な試合結果
6. **大会統計サマリー**: 
   - 進行率（完了/未実施試合数）
   - 勝敗決着・引き分け試合数の内訳
   - 総得点数と平均得点
   - 参加チーム数と試合数統計
7. **システム設定情報**: マッチポイント、エクスポート日時、アプリバージョン
8. **大会情報**: 名称、日付、場所、形式など（config.jsonから取得）

#### 🎯 **エクスポートファイルの特徴**
- **UTF-8 BOM付き**: Excelで日本語が正しく表示される
- **セクション分離**: 区切り線とタイトルで視覚的に整理
- **日本語ラベル**: 理解しやすい項目名と説明
- **パーセンテージ表示**: 勝率や進行率を％で表示
- **統計計算**: 自動的な順位付けと詳細分析

## セットアップ方法

### 必要な環境
- **Webブラウザ**: Chrome、Firefox、Safari、Edge等のモダンブラウザ
- **ローカルサーバー**: Python 3.x、Node.js、またはその他のHTTPサーバー
- **推奨環境**: Windows 10/11、macOS 10.15+、Linux（Ubuntu 20.04+）

### インストールと起動
1. **リポジトリの取得**
   ```bash
   git clone https://github.com/yanagi-jabee-28/TennisMatch-Pro-2.git
   cd TennisMatch-Pro-2
   ```

2. **ローカルサーバーの起動**
   ```powershell
   # Python使用の場合
   python -m http.server 8080
   
   # Node.js使用の場合（npx）
   npx http-server -p 8080
   
   # Live Server (VSCode拡張機能) 使用の場合
   # index.htmlを右クリック → "Open with Live Server"
   ```

3. **アプリケーションの起動**
   - ブラウザで `http://localhost:8080` を開く
   - または `http://localhost:8080/index.html` を直接開く

### 設定ファイルの編集
`config.json` を編集してチーム構成をカスタマイズ：
```json
{
  "teams": [
    {
      "id": 1,
      "members": ["メンバー1", "メンバー2"]
    }
  ],
  "tournamentInfo": {
    "name": "大会名",
    "date": "2025-06-05",
    "location": "開催場所"
  }
}
```

## プロジェクト構成

```
TennisMatch-Pro-2/
├── index.html              # メインHTMLファイル
├── config.json             # チーム設定・大会情報
├── README.md               # プロジェクト説明書
├── 名簿.md                 # メンバー名簿
├── app/                    # アプリケーションロジック
│   ├── main.js             # メインエントリーポイント
│   ├── state.js            # アプリケーション状態管理
│   ├── dom.js              # DOM要素キャッシュ
│   ├── matches.js          # 試合管理機能
│   ├── standings.js        # 順位表計算
│   ├── export.js           # データエクスポート
│   ├── debug.js            # デバッグ機能
│   ├── config.js           # 設定読み込み
│   ├── utils.js            # ユーティリティ関数
│   └── components/         # UIコンポーネント
│       ├── scoreModal.js   # スコア入力モーダル
│       ├── teamEditor.js   # チーム編集機能
│       ├── customConfirm.js# 確認ダイアログ
│       └── toast.js        # 通知システム
├── css/                    # スタイルシート
│   ├── styles.css          # メインスタイル（統合）
│   ├── base.css            # 基本スタイル
│   ├── layout.css          # レイアウト
│   ├── responsive.css      # レスポンシブデザイン
│   └── components/         # コンポーネント別スタイル
│       ├── buttons.css     # ボタンスタイル
│       ├── tables.css      # テーブルスタイル
│       ├── modals.css      # モーダルスタイル
│       ├── forms.css       # フォームスタイル
│       ├── dialog.css      # ダイアログスタイル
│       ├── teams.css       # チーム表示スタイル
│       └── toast.css       # 通知スタイル
```

## 技術仕様
- **フロントエンド**: Vanilla JavaScript (ES6+), HTML5, CSS3
- **データ管理**: LocalStorage API
- **モジュール**: ES6 Modules
- **レスポンシブ**: CSS Grid & Flexbox
- **互換性**: モダンブラウザ対応（IE非対応）
- **モバイル最適化**: Touch Events API, Vibration API, PWA, Responsive Design

## 開発者向け情報

### 主要なファイルの役割
- `app/main.js`: アプリケーションの初期化とメインロジック
- `app/state.js`: アプリケーション状態の管理とLocalStorage連携
- `app/matches.js`: 対戦表の生成と試合結果管理
- `app/standings.js`: 順位表の計算とレンダリング
- `app/export.js`: CSV形式でのデータエクスポート機能
- `app/debug.js`: 開発・テスト用のデバッグ機能
- **📱 モバイル関連**:
  - `app/components/mobileEnhancements.js`: 基本的なモバイル操作改善
  - `app/components/advancedMobile.js`: 高度なモバイル機能（PWA、振動など）
  - `css/components/mobile.css`: モバイル専用スタイル

### アーキテクチャ
- **モジュール化**: ES6 Modulesによる機能分離
- **状態管理**: 中央集権的な状態管理パターン
- **データ永続化**: LocalStorage APIによる自動保存
- **レスポンシブデザイン**: CSS Grid & Flexboxによる柔軟なレイアウト

### 開発環境のセットアップ
1. **必要な拡張機能** (VSCode推奨)
   - Live Server: リアルタイムプレビュー
   - Prettier: コードフォーマッター
   - ESLint: JavaScript品質チェック

2. **デバッグ方法**
   - ブラウザの開発者ツール（F12）を使用
   - アプリ内のデバッグ機能（🎲、🗑️ボタン）を活用
   - LocalStorageの確認: `localStorage.getItem('tennisMatchData')`

### トラブルシューティング
- **CORSエラー**: ローカルサーバーを必ず使用してください（file://では動作しません）
- **設定が反映されない**: ブラウザのキャッシュをクリアしてください
- **データが消える**: LocalStorageが無効化されていないか確認してください
- **レイアウト崩れ**: ブラウザの互換性を確認してください（IE非対応）
- **📱 モバイル関連の問題**:
  - **タッチが反応しない**: ブラウザのタッチサポートを確認、キャッシュクリア
  - **振動が動作しない**: デバイスとブラウザが振動APIに対応しているか確認
  - **スワイプが効かない**: タッチイベントが他の要素に妨害されていないか確認
  - **画面回転で崩れる**: 回転後少し待つ、または手動でページをリフレッシュ
  - **キーボード表示で画面が崩れる**: iOS Safariの場合は仕様、アプリで自動調整対応済み

## ライセンス
MIT License - 詳細は [LICENSE](LICENSE) ファイルを参照

## 更新履歴
- **v2.2.0** (2025-06-05): 📱 スマホ操作性の大幅向上 - タッチ最適化、スワイプ操作、振動フィードバック、PWA対応、長押しメニュー、画面回転対応、キーボード調整
- **v2.1.0** (2025-06-05): プロジェクト構成の見直し、READMEの大幅アップデート、開発者向け情報充実
- **v2.0.0** (2025-06-05): デバッグ機能追加、順位付きCSVエクスポート、モジュール化完了
- **v1.0.0**: 基本的な試合管理機能、順位表、データエクスポート

## 貢献・サポート
- **問題報告**: [GitHub Issues](https://github.com/yanagi-jabee-28/TennisMatch-Pro-2/issues)
- **機能要望**: Pull Requestをお送りください
- **ディスカッション**: [GitHub Discussions](https://github.com/yanagi-jabee-28/TennisMatch-Pro-2/discussions)

### コントリビューション方法
1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add some amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. Pull Requestを作成
