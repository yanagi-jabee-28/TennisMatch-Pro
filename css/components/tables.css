/* テーブル関連のスタイル */

/* 基本テーブルスタイル */
table {
	width: 100%;
	border-collapse: collapse;
	margin-bottom: 1rem;
}

/* 対戦表専用のスタイル */
#match-grid {
	table-layout: fixed;
	width: auto;
	margin: 0 auto;
	touch-action: pan-x pan-y; /* スクロール操作を許可 */
}

.table-container {
	/* スクロール改善 */
	scroll-behavior: smooth;
	-webkit-overflow-scrolling: touch;
}

th,
td {
	padding: 0.75rem;
	text-align: center;
	border: 1px solid var(--border-color);
}

td,
th {
	border: 2px solid var(--border-color);
}

thead th {
	background-color: var(--primary-color);
	color: white;
}

/* 対戦表の対角線スタイル */
.diagonal-line {
	position: relative;
	background-color: var(--secondary-color);
}

.diagonal-line::after {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: linear-gradient(to bottom right, transparent calc(50% - 1px), var(--border-color), transparent calc(50% + 1px));
	pointer-events: none;
}

/* 対戦表のセル幅固定 */
#match-grid td,
#match-grid th {
	width: 80px;
	min-width: 80px;
	max-width: 80px;
	height: 60px;
	box-sizing: border-box;
	word-wrap: break-word;
	overflow: hidden;
	position: relative;
}

/* クリック可能なセル - タッチデバイス対応 */
.clickable-cell {
	cursor: pointer;
	transition: background-color 0.2s ease-in-out;
	-webkit-tap-highlight-color: rgba(26, 115, 232, 0.3); /* タッチ時のハイライト */
	user-select: none; /* テキスト選択を防ぐ */
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
}

/* ホバー効果をタッチデバイスで無効化し、アクティブ状態を追加 */
@media (hover: hover) {
	.clickable-cell:hover {
		background-color: rgba(26, 115, 232, 0.15);
	}
}

.clickable-cell:active {
	background-color: rgba(26, 115, 232, 0.25);
	transform: scale(0.98);
}

td {
	position: relative;
}

/* 試合結果表示 */
.match-result {
	font-weight: bold;
	font-size: 1.1em;
	line-height: 1.2;
}

/* 勝敗の色分け */
.match-result.winner {
	color: var(--success-color);
	background-color: rgba(52, 168, 83, 0.1);
}

.match-result.loser {
	color: var(--error-color);
	background-color: rgba(234, 67, 53, 0.1);
}

.match-result.draw {
	color: #ff9800;
	background-color: rgba(255, 152, 0, 0.1);
}

/* コンパクトモード用のスタイル - 改善版 */
.table-container.compact-mode {
	overflow: visible !important;
	background: linear-gradient(135deg, #f8f9fa 0%, #e8eaf6 100%);
	padding: 1.25rem;
	border-radius: 16px;
	box-shadow: 
		0 4px 12px rgba(0, 0, 0, 0.1),
		0 2px 4px rgba(0, 0, 0, 0.05);
	border: 1px solid rgba(255, 255, 255, 0.5);
	position: relative;
}

.table-container.compact-mode::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: linear-gradient(135deg, 
		rgba(255, 255, 255, 0.8) 0%, 
		rgba(255, 255, 255, 0.3) 100%);
	border-radius: 16px;
	z-index: -1;
}

.table-container.compact-mode #match-grid {
	width: 100%;
	table-layout: fixed;
	border-collapse: separate;
	border-spacing: 3px;
	background-color: transparent;
	border-radius: 12px;
	overflow: hidden;
	position: relative;
	z-index: 1;
}

/* コンパクトモードのセル基本スタイル */
.table-container.compact-mode #match-grid td,
.table-container.compact-mode #match-grid th {
	width: var(--compact-cell-size, 45px) !important;
	min-width: var(--compact-cell-size, 45px) !important;
	max-width: var(--compact-cell-size, 45px) !important;
	height: var(--compact-cell-size, 45px) !important;
	padding: 0.3rem !important;
	font-size: calc(var(--compact-cell-size, 45px) * 0.025 + 0.6rem) !important;
	line-height: 1.1 !important;
	border: none !important;
	background-color: white;
	text-align: center;
	vertical-align: middle;
	position: relative;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	border-radius: 6px;
	box-shadow: 
		0 1px 3px rgba(0, 0, 0, 0.1),
		inset 0 1px 0 rgba(255, 255, 255, 0.9);
	font-weight: 500;
}

/* コンパクトモードの試合結果表示 */
.table-container.compact-mode .match-result {
	font-size: calc(var(--compact-cell-size, 45px) * 0.02 + 0.5rem) !important;
	font-weight: 700 !important;
	line-height: 1 !important;
	padding: 3px !important;
	border-radius: 4px;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	color: #2c3e50;
}

/* コンパクトモードでの勝敗色分け */
.table-container.compact-mode .match-result.winner {
	color: var(--success-color) !important;
	background-color: rgba(52, 168, 83, 0.15) !important;
	text-shadow: 0 1px 2px rgba(52, 168, 83, 0.3) !important;
}

.table-container.compact-mode .match-result.loser {
	color: var(--error-color) !important;
	background-color: rgba(234, 67, 53, 0.15) !important;
	text-shadow: 0 1px 2px rgba(234, 67, 53, 0.3) !important;
}

.table-container.compact-mode .match-result.draw {
	color: #ff9800 !important;
	background-color: rgba(255, 152, 0, 0.15) !important;
	text-shadow: 0 1px 2px rgba(255, 152, 0, 0.3) !important;
}

/* コンパクトモードのヘッダー（チーム名）スタイル */
.table-container.compact-mode #match-grid th {
	background: linear-gradient(135deg, 
		var(--primary-color) 0%, 
		#1565c0 50%, 
		#0d47a1 100%) !important;
	color: white !important;
	font-weight: 700 !important;
	font-size: calc(var(--compact-cell-size, 45px) * 0.02 + 0.55rem) !important;
	height: calc(var(--compact-cell-size, 45px) * 1.4) !important;
	writing-mode: vertical-rl;
	text-orientation: mixed;
	padding: 0.6rem 0.3rem !important;
	border-radius: 6px;
	box-shadow: 
		0 2px 4px rgba(0, 0, 0, 0.2),
		inset 0 1px 0 rgba(255, 255, 255, 0.3);
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
	border: 1px solid rgba(255, 255, 255, 0.2);
	overflow: hidden;
	position: relative;
}

.table-container.compact-mode #match-grid th::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: linear-gradient(45deg, 
		rgba(255, 255, 255, 0.1) 0%, 
		transparent 50%, 
		rgba(255, 255, 255, 0.05) 100%);
	z-index: 1;
}

/* 左上の空セル */
.table-container.compact-mode #match-grid th:first-child {
	writing-mode: horizontal-tb !important;
	text-orientation: initial !important;
	height: calc(var(--compact-cell-size, 45px)) !important;
	background: linear-gradient(135deg, 
		var(--secondary-color) 0%, 
		#e8eaf6 50%, 
		#c5cae9 100%) !important;
	color: var(--text-color) !important;
	border-radius: 6px;
	font-weight: 600 !important;
	text-shadow: none;
}

/* 行ヘッダー（チーム番号） */
.table-container.compact-mode #match-grid tbody th {
	background: linear-gradient(45deg, 
		var(--primary-color) 0%, 
		#1565c0 50%, 
		#0d47a1 100%) !important;
	color: white !important;
	font-weight: 800 !important;
	writing-mode: horizontal-tb !important;
	text-orientation: initial !important;
	height: calc(var(--compact-cell-size, 45px)) !important;
	width: calc(var(--compact-cell-size, 45px) * 1.2) !important;
	min-width: calc(var(--compact-cell-size, 45px) * 1.2) !important;
	border-radius: 6px;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
	border: 1px solid rgba(255, 255, 255, 0.2);
	/* 数字の回転を明示的に防止 */
	transform: none !important;
	text-align: center !important;
	vertical-align: middle !important;
}

/* コンパクトモードのクリック可能セル */
.table-container.compact-mode .clickable-cell {
	position: relative;
	-webkit-tap-highlight-color: rgba(26, 115, 232, 0.3);
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	border-radius: 6px;
	background: linear-gradient(135deg, 
		#ffffff 0%, 
		#f8f9fa 100%);
	border: 1px solid rgba(0, 0, 0, 0.08);
	overflow: hidden;
}

.table-container.compact-mode .clickable-cell::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: linear-gradient(45deg, 
		rgba(255, 255, 255, 0.8) 0%, 
		transparent 50%, 
		rgba(255, 255, 255, 0.4) 100%);
	opacity: 0;
	transition: opacity 0.3s ease;
	z-index: 1;
}

@media (hover: hover) {
	.table-container.compact-mode .clickable-cell:hover {
		background: linear-gradient(135deg, 
			rgba(26, 115, 232, 0.1) 0%, 
			rgba(63, 81, 181, 0.05) 100%) !important;
		border-color: var(--primary-color) !important;
		transform: translateY(-2px) scale(1.02);
		box-shadow: 
			0 4px 8px rgba(0, 0, 0, 0.12),
			0 2px 4px rgba(26, 115, 232, 0.2);
	}
	
	.table-container.compact-mode .clickable-cell:hover::before {
		opacity: 1;
	}
}

.table-container.compact-mode .clickable-cell:active {
	background: linear-gradient(135deg, 
		rgba(26, 115, 232, 0.2) 0%, 
		rgba(63, 81, 181, 0.1) 100%) !important;
	transform: translateY(-1px) scale(0.98);
	box-shadow: 
		0 2px 4px rgba(0, 0, 0, 0.15),
		inset 0 1px 2px rgba(26, 115, 232, 0.2);
}

/* 対角線のセル */
.table-container.compact-mode .diagonal-line {
	background: linear-gradient(135deg, 
		#f5f5f5 0%, 
		#e8eaf6 50%, 
		#e0e0e0 100%) !important;
	border-radius: 6px;
	border: 1px solid rgba(0, 0, 0, 0.05);
}

.table-container.compact-mode .diagonal-line::after {
	background: linear-gradient(to bottom right, 
		transparent calc(50% - 1.5px), 
		rgba(103, 58, 183, 0.6) calc(50% - 0.5px),
		rgba(103, 58, 183, 0.6) calc(50% + 0.5px),
		transparent calc(50% + 1.5px));
	z-index: 2;
}

/* コンパクトモード - タブレット対応 */
@media (max-width: 768px) {
	.table-container.compact-mode {
		padding: 1rem;
		border-radius: 12px;
	}
	
	.table-container.compact-mode #match-grid {
		border-spacing: 2px;
	}
	
	.table-container.compact-mode #match-grid td,
	.table-container.compact-mode #match-grid th {
		border-radius: 4px;
	}
	
	.table-container.compact-mode #match-grid th {
		font-size: calc(var(--compact-cell-size, 40px) * 0.02 + 0.5rem) !important;
		height: calc(var(--compact-cell-size, 40px) * 1.3) !important;
		padding: 0.5rem 0.25rem !important;
	}
	
	.table-container.compact-mode #match-grid tbody th {
		width: calc(var(--compact-cell-size, 40px) * 1.1) !important;
		min-width: calc(var(--compact-cell-size, 40px) * 1.1) !important;
		font-size: calc(var(--compact-cell-size, 40px) * 0.025 + 0.55rem) !important;
	}
	
	.table-container.compact-mode .match-result {
		font-size: calc(var(--compact-cell-size, 40px) * 0.018 + 0.45rem) !important;
	}
}

/* コンパクトモード - スマートフォン対応 */
@media (max-width: 480px) {
	.table-container.compact-mode {
		padding: 0.75rem;
		border-radius: 10px;
	}
	
	.table-container.compact-mode #match-grid {
		border-spacing: 1.5px;
	}
	
	.table-container.compact-mode #match-grid td,
	.table-container.compact-mode #match-grid th {
		border-radius: 3px;
		padding: 0.2rem !important;
	}
	
	.table-container.compact-mode #match-grid th {
		font-size: calc(var(--compact-cell-size, 35px) * 0.018 + 0.45rem) !important;
		height: calc(var(--compact-cell-size, 35px) * 1.25) !important;
		padding: 0.4rem 0.2rem !important;
	}
	
	.table-container.compact-mode #match-grid tbody th {
		width: calc(var(--compact-cell-size, 35px) * 1.05) !important;
		min-width: calc(var(--compact-cell-size, 35px) * 1.05) !important;
		font-size: calc(var(--compact-cell-size, 35px) * 0.02 + 0.5rem) !important;
	}
	
	.table-container.compact-mode .match-result {
		font-size: calc(var(--compact-cell-size, 35px) * 0.016 + 0.4rem) !important;
	}
}

/* 極小画面での特別調整 */
@media (max-width: 360px) {
	.table-container.compact-mode {
		padding: 0.5rem;
		border-radius: 8px;
	}
	
	.table-container.compact-mode #match-grid {
		border-spacing: 1px;
	}
	
	.table-container.compact-mode #match-grid td,
	.table-container.compact-mode #match-grid th {
		border-radius: 2px;
		padding: 0.15rem !important;
	}
	
	.table-container.compact-mode #match-grid th {
		font-size: calc(var(--compact-cell-size, 30px) * 0.015 + 0.4rem) !important;
		height: calc(var(--compact-cell-size, 30px) * 1.2) !important;
		padding: 0.3rem 0.15rem !important;
	}
	
	.table-container.compact-mode #match-grid tbody th {
		width: calc(var(--compact-cell-size, 30px)) !important;
		min-width: calc(var(--compact-cell-size, 30px)) !important;
		font-size: calc(var(--compact-cell-size, 30px) * 0.018 + 0.45rem) !important;
	}
	
	.table-container.compact-mode .match-result {
		font-size: calc(var(--compact-cell-size, 30px) * 0.014 + 0.35rem) !important;
	}
}

/* 対戦表の行ヘッダー（チーム番号）*/
#match-grid th:first-child {
	background-color: var(--primary-color);
	color: white;
	font-weight: bold;
}

/* 順位表のスタイル */
#standings-table td,
#standings-table th {
	padding: 0.75rem 1rem;
}

#standings-table tr:nth-child(even) {
	background-color: var(--secondary-color);
}

#standings-table tbody tr:hover {
	background-color: rgba(26, 115, 232, 0.1);
}

/* 得失点差の表示スタイル */
.positive-diff {
	color: var(--success-color);
	font-weight: bold;
}

.negative-diff {
	color: var(--error-color);
	font-weight: bold;
}
